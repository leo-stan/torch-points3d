data:
  task: segmentation
  class: copc_dataset.CopcDataset
  dataroot: /media/nvme/pcdata
  is_inference: False
  resolution: 0.5
  dataset_version: 1
  min_num_points: 200 # minimum number of points for a tile to be considered a valid sample
  datasets:
    #    - name: name
    #        sampling_rate: # How often this dataset get selected to draw samples (0=never, 1=same probability as other datasets)
    #        ignore_classes: [ ] # Classes for which we don't update the loss for but do not remove the points
    #        filter_classes: [ ] # Classes for which we remove the points before passing to model
    #        class_map_from_to: [[from,to],[from,to],[from,to],...] # Map classes [from,to]
    autzen:
      num_training_samples: -1  # Number of random sample per epoch, -1 for all samples
      ignore_classes: [0] # class 0 has a lot of ground points mixed in
      filter_classes: []
      class_map_from_to: [[9,2]]
  training_classes: [2]
  training_classes_weights: [1, 1] #[otherClass, train_class[0], train_class[1], ...]

  train_transforms:
    - transform: XYZFeature
      params:
        add_x: True
        add_y: True
        add_z: True
    - transform: AddFeatsByKeys
      params:
        list_add_to_x: [True, True, True]
        feat_names: [pos_z, pos_x, pos_y]
        delete_feats: [True, True, True]
    - transform: GridSampling3D
      params:
        size: ${data.resolution}
        quantize_coords: True
        mode: "last"
  test_transform:
    - transform: SaveOriginalPosId
    - transform: XYZFeature
      params:
        add_x: True
        add_y: True
        add_z: True
    - transform: AddFeatsByKeys
      params:
        list_add_to_x: [True, True, True]
        feat_names: [pos_z, pos_x, pos_y]
        delete_feats: [True, True, True]
    - transform: GridSampling3D
      params:
        size: ${data.resolution}
        quantize_coords: True
        mode: "last"
  val_transform: ${data.test_transform}
